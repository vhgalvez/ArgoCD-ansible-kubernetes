# vars/main.yml
# ─────────────────────────────────────────────────────────────────────────────
# Configuración principal del despliegue de Argo CD
# ─────────────────────────────────────────────────────────────────────────────

# Namespace donde se despliega Argo CD
argocd_namespace: argocd

# Dominio público para acceder al Dashboard (Traefik → IngressRoute)
argocd_dashboard_domain: "argocd.socialdevs.site"

# (Opcional) Host alternativo si usas Traefik Ingress de tipo "Ingress" clásico
ingress_host: "argocd.cefaslocalserver.com"

# Nombre del Secret TLS wildcard compartido (ya existente en kube-system)
tls_secret_name: wildcard-socialdevs-tls


# ── Usuario y contraseña para acceso UI ──────────────────────────────────────
argocd_admin_user: admin
argocd_admin_password_plain: "{{ lookup('env', 'ARGOCD_UI_ADMIN_PASSWORD') }}"


# ── Credenciales básicas para el Dashboard  traefik ──────────────────────────────────
# Se leen de variables de entorno; si no existen, se usa un fallback.
argocd_auth_user: "{{ lookup('env', 'ARGOCD_AUTH_USER') }}"
argocd_auth_pass: "{{ lookup('env', 'ARGOCD_AUTH_PASS') }}"

# ── Objetos Traefik CRD ─────────────────────────────────────────────────────
# Nombre del middleware de BasicAuth
argocd_middleware_name: argocd-auth-middleware

# Nombre del Secret con las credenciales htpasswd (referenciado por el middleware)
argocd_secret_name: argocd-auth-secret   # ← este debe existir en el namespace argocd

# ── Rutas de herramientas locales ───────────────────────────────────────────
kubeconfig_path: "/home/victory/.kube/config"
kubectl_path:    "/usr/local/bin/kubectl"
kubeseal_path:   "/usr/local/bin/kubeseal"

# ── Versión del Helm Chart de Argo CD ───────────────────────────────────────
argocd_chart_version: "5.51.6"

# URL de los CRDs de Traefik v3.4 (si necesitas instalarlos manualmente)
traefik_crds_url: "https://raw.githubusercontent.com/traefik/traefik/v3.4.1/pkg/provider/kubernetes/crd/traefik-crd.yaml"